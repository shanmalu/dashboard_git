<!doctype html>
<html lang="ko">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>928.ì˜¨ë„ìŠµë„ì¡°ëª…</title>

<style>
  body { font-family: system-ui, sans-serif; margin:12px; background:#f7f7f9; }
  .grid { display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(160px,1fr)); }
  .card { background:white; border-radius:14px; padding:12px; box-shadow:0 6px 12px rgba(0,0,0,.06); text-align:center; }
  .title { font-size:18px; font-weight:700; margin-bottom:8px; text-align:center; }
  .item { font-size:16px; margin:2px 0; }
  
header { display: flex;
  flex-direction: column;   /* ì„¸ë¡œ ë°°ì¹˜ */
  align-items: center;      /* ê°€ë¡œ ì¤‘ì•™ */
  justify-content: center;  /* ì„¸ë¡œ ì¤‘ì•™ */
  margin-bottom: 10px; }

 .header-box { width: auto;  text-align: center;
    
  h1 { font-size:18px; margin:0; }
  .clock { font-size:16px; } 
              
</style>

<body>

<header>
 <div class="header-box">
  <h1> ğŸ“Š ì‹¤ì‹œê°„ ì¸¡ì •ì¹˜</h1> 
  <div class="clock" id="clock">--:--:-- </div>
 </div>
</header>

<div class="grid">

  <!-- ì˜¨ë„ -->
  <div class="card">
    <div class="title">ğŸŒ¡ï¸ ì˜¨ë„ (â„ƒ)</div>
    <div class="item" id="n3_temp">ğŸŒ¿ ì‹¤ ì™¸ : --</div>
    <div class="item" id="n1_temp">ğŸ ì»¨í…Œë„ˆ: --</div>
    <div class="item" id="n4_temp">ğŸŒ¿ë‚œì‹¤í•˜: --</div>
    <div class="item" id="n2_temp">ğŸŒ¿ë‚œì‹¤ìƒ: --</div>  
 </div>

  <!-- ì¡°ëª… -->
  <div class="card">
    <div class="title">ğŸ’¡ ì¡°ëª… (Lux)</div>
    <div class="item" id="n3_lux">ğŸŒ¿ ì‹¤ ì™¸ : --</div>
    <div class="item" id="n1_lux">ğŸ ì»¨í…Œë„ˆ: --</div>
    <div class="item" id="n4_lux">ğŸŒ¿ë‚œì‹¤í•˜: --</div>
    <div class="item" id="n2_lux">ğŸŒ¿ë‚œì‹¤ìƒ: --</div>       
  </div>

  <!-- ìŠµë„ -->
  <div class="card">
    <div class="title">ğŸ’§ ìŠµë„ (%)</div>
    <div class="item" id="n3_hum">ğŸŒ¿ ì‹¤ ì™¸ : --</div>
    <div class="item" id="n1_hum">ğŸ ì‚¬ë¬´ì‹¤: --</div>
    <div class="item" id="n4_hum">ë‚œì‹¤í•˜: --</div>
    <div class="item" id="n2_hum">ë‚œì‹¤ìƒ: --</div>       
  </div>

</div>

<script>
const CHANNELS = {
  naver1: { id: 3047574, read_key: "3ZULDVNI47LM2XUU" },
  naver2: { id: 3047580, read_key: "589U5K9LQDG7MMZO" },
  naver3: { id: 3047588, read_key: "7JQ621N43OOEKA13" },
  naver4: { id: 3047591, read_key: "WCREQ2P18WN27TUP" }
};

function q(id){ return document.getElementById(id); }
function pad(n){ return n.toString().padStart(2,"0"); }

function fmtClockTime(){
  const d=new Date();
  return `${d.getFullYear()}.${d.getMonth()+1}.${d.getDate()} ` +
         `${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;
}

async function fetchLast({id, read_key}){
  const url=`https://api.thingspeak.com/channels/${id}/feeds/last.json?api_key=${read_key}`;
  const r=await fetch(url);
  return r.json();
}

async function update(){
  const [n1,n2,n3,n4]=await Promise.all([
    fetchLast(CHANNELS.naver1),
    fetchLast(CHANNELS.naver2),
    fetchLast(CHANNELS.naver3),
    fetchLast(CHANNELS.naver4),
  ]);

  q("n3_lux").textContent  = `ğŸŒ¿ ì‹¤ ì™¸ : ${Math.round(n3.field1)} Lux`;
  q("n1_lux").textContent  = `ğŸ ì»¨í…Œë„ˆ: ${Math.round(n1.field1)} Lux`;
  q("n4_lux").textContent  = `ğŸŒ¿ë‚œì‹¤í•˜: ${Math.round(n4.field1)} Lux`;
  q("n2_lux").textContent  = `ğŸŒ¿ë‚œì‹¤ìƒ: ${Math.round(n2.field1)} Lux`;
   
  q("n3_temp").textContent = `ğŸŒ¿ ì‹¤ ì™¸ : ${(+n3.field2).toFixed(1)} â„ƒ`;
  q("n1_temp").textContent = `ğŸ ì»¨í…Œë„ˆ: ${(+n1.field2).toFixed(1)} â„ƒ`;
  q("n4_temp").textContent = `ğŸŒ¿ë‚œì‹¤í•˜: ${(+n4.field2).toFixed(1)} â„ƒ`;
  q("n2_temp").textContent = `ğŸŒ¿ë‚œì‹¤ìƒ: ${(+n2.field2).toFixed(1)} â„ƒ`;
  
  q("n3_hum").textContent  = `ğŸŒ¿ ì‹¤ ì™¸ : ${Math.round(n3.field3)} %`;
  q("n1_hum").textContent  = `ğŸ ì»¨í…Œë„ˆ: ${Math.round(n1.field3)} %`;
  q("n4_hum").textContent  = `ğŸŒ¿ë‚œì‹¤í•˜: ${Math.round(n4.field3)} %`;
  q("n2_hum").textContent  = `ğŸŒ¿ë‚œì‹¤ìƒ: ${Math.round(n2.field3)} %`;
  
}

setInterval(()=>q("clock").textContent=fmtClockTime(),1000);
update();
setInterval(update,10000);
</script>

</body>
</html>














