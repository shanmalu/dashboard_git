<!doctype html>
<html lang="ko">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>928.í—¤ë“œ2ì¤„</title>

<style>
  body { font-family: system-ui, sans-serif; margin:12px; background:#f7f7f9; }
  .grid { display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(160px,1fr)); }
  .card { background:white; border-radius:14px; padding:4px; box-shadow:0 6px 12px rgba(0,0,0,.06); text-align:center; }
  .title { font-size:16px; font-weight:700; margin-bottom:4px; }
  .item { font-size:16px; margin:2px 0; text-align:center; }
  
header { display: flex;
  flex-direction: column;  /* ì„¸ë¡œ ë°°ì¹˜ */
  align-items: center;     /*  ê°€ë¡œ ì¤‘ì•™ */
  justify-content: center; /* ì„¸ë¡œ ì¤‘ì•™ */
  margin-bottom: 4px; }

 .header-box { width: auto;}
    
  h1 { font-size:18px; margin:0; }
  .clock { font-size:14px; } 
              
</style>

<body>

<header>
 <div class="header-box">
  <h1>ğŸ“Š ì‹¤ì‹œê°„ ì¸¡ì •ì¹˜</h1> 
  <div class="clock" id="clock"> --:--:-- </div>
 </div>
</header>

<div class="grid">

  <div class="card">
    <div class="title">ğŸŒ¡ï¸ ì˜¨ ë„ (â„ƒ) </div>
    <div class="item" id="n3_temp">ğŸŒ¿ ì‹¤ ì™¸ : --</div>
    <div class="item" id="n1_temp">ğŸ  ì»¨í…Œë„ˆ : --</div>
    <div class="item" id="n4_temp">ğŸŒ¿ ì˜¨ì‹¤í•˜ : --</div>
    <div class="item" id="n2_temp">ğŸŒ¿ ì˜¨ì‹¤ìƒ : --</div> 
    <div class="item" id="g3_temp">ğŸ¢ ê¹€ í¬ : --</div>
  </div>

  <div class="card">
    <div class="title">ğŸ’¡ ì¡° ëª… (Lux) </div>
    <div class="item" id="n3_lux">ğŸŒ¿ ì‹¤  ì™¸ : --</div>
    <div class="item" id="n1_lux">ğŸ  ì»¨í…Œë„ˆ : --</div>
    <div class="item" id="n4_lux">ğŸŒ¿ ì˜¨ì‹¤í•˜ : --</div>
    <div class="item" id="n2_lux">ğŸŒ¿ ì˜¨ì‹¤ìƒ : --</div> 
    <div class="item" id="g3_lux">ğŸ¢ ê¹€ í¬ : --</div>
  </div>

  <div class="card">
    <div class="title">ğŸ’§ ìŠµ ë„ (%) </div>
    <div class="item" id="n3_hum">ğŸŒ¿ ì‹¤ ì™¸ : --</div>
    <div class="item" id="n1_hum">ğŸ  ì‚¬ë¬´ì‹¤ : --</div>
    <div class="item" id="n4_hum">ğŸŒ¿ì˜¨ì‹¤í•˜ : --</div>
    <div class="item" id="n2_hum">ğŸŒ¿ì˜¨ì‹¤ìƒ : --</div> 
    <div class="item" id="g3_hum">ğŸ¢ ê¹€ í¬ : --</div>
  </div>

</div>

<script>
const CHANNELS = {
  gma1:   { id: 3018897, read_key: "8LPG5E9FMQBPMT95" },
  gma2:   { id: 3016776, read_key: "0GYPNOPAHTLWY2FU" },
  gma3:   { id: 3020435, read_key: "DQW527FW43D0I249" },
  gma4:   { id: 3015582, read_key: "4KTWZ5HV3YTL7JE6" },
  naver1: { id: 3047574, read_key: "3ZULDVNI47LM2XUU" },
  naver2: { id: 3047580, read_key: "589U5K9LQDG7MMZO" },
  naver3: { id: 3047588, read_key: "7JQ621N43OOEKA13" },
  naver4: { id: 3047591, read_key: "WCREQ2P18WN27TUP" }
};

function q(id){ return document.getElementById(id); }
function pad(n){ return n.toString().padStart(2,"0"); }

function fmtClockTime(){
  const d=new Date();
  return ` ${d.getFullYear()}.${d.getMonth()+1}.${d.getDate()}.` +
         `${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;
}

async function fetchLast({id, read_key}){
  const url=`https://api.thingspeak.com/channels/${id}/feeds/last.json?api_key=${read_key}`;
  const r=await fetch(url);
  return r.json();
}

async function update(){
  const [g1, g2, g3, g4, n1,n2,n3,n4]=await Promise.all([
    fetchLast(CHANNELS.gma1), 
    fetchLast(CHANNELS.gma2),
    fetchLast(CHANNELS.gma3), 
    fetchLast(CHANNELS.gma4),   
    fetchLast(CHANNELS.naver1),
    fetchLast(CHANNELS.naver2),
    fetchLast(CHANNELS.naver3),
    fetchLast(CHANNELS.naver4),
  ]);

  q("n3_lux").textContent  = `ğŸŒ¿ ì‹¤ ì™¸ : ${Math.round(n3.field1)} Lux`;
  q("n1_lux").textContent  = `ğŸ  ì»¨í…Œë„ˆ : ${Math.round(n1.field1)} Lux`;
  q("n4_lux").textContent  = `ğŸŒ¿ ì˜¨ì‹¤í•˜ : ${Math.round(n4.field1)} Lux`;
  q("n2_lux").textContent  = `ğŸŒ¿ ì˜¨ì‹¤ìƒ : ${Math.round(n2.field1)} Lux`;
  q("g3_lux").textContent  = `ğŸ¢ ê¹€ í¬ : ${Math.round(g3.field1)} Lux`;
   
  q("n3_temp").textContent = `ğŸŒ¿ ì‹¤ ì™¸ : ${(+n3.field2).toFixed(1)} â„ƒ`;
  q("n1_temp").textContent = `ğŸ  ì»¨í…Œë„ˆ : ${(+n1.field2).toFixed(1)} â„ƒ`;
  q("n4_temp").textContent = `ğŸŒ¿ ì˜¨ì‹¤í•˜ : ${(+n4.field2).toFixed(1)} â„ƒ`;
  q("n2_temp").textContent = `ğŸŒ¿ ì˜¨ì‹¤ìƒ : ${(+n2.field2).toFixed(1)} â„ƒ`;
  q("g3_temp").textContent = `ğŸ¢ ê¹€ í¬ : ${(+g3.field2).toFixed(1)} â„ƒ`;
  
  q("n3_hum").textContent  = `ğŸŒ¿ ì‹¤ ì™¸ : ${Math.round(n3.field3)} %`;
  q("n1_hum").textContent  = `ğŸ  ì»¨í…Œë„ˆ : ${Math.round(n1.field3)} %`;
  q("n4_hum").textContent  = `ğŸŒ¿ ì˜¨ì‹¤í•˜ : ${Math.round(n4.field3)} %`;
  q("n2_hum").textContent  = `ğŸŒ¿ ì˜¨ì˜¨ì‹¤ìƒ : ${Math.round(n2.field3)} %`;
  q("g3_hum").textContent  = `ğŸ¢ ê¹€ í¬ : ${Math.round(g3.field3)} %`;
  
}

setInterval(()=>q("clock").textContent=fmtClockTime(),1000);
update();
setInterval(update,10000);
</script>

</body>
</html>


